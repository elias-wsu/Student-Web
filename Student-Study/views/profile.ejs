<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/stylesheets/profile.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <title>StudentStudy | Profile</title>
</head>

<body>
  <div class="form-popup container" id="popup-form">

    <form method="post" action="/chg_usrname">
      <div class="form2 container">
        <h2>Change username</h2>

        <div class="user-input2 container">
          <label class="input-label2">Current Username</label>
          <input class="input-main-box" name="oldusername" type="text" value="<%= user.username %>" readonly="readonly">
        </div>

        <div class="user-input2 container">
          <label class="input-label2">New Username</label>
          <input class="input-main-box" name="newusername" type="text" maxlength=" 15" minlength="3" required>
        </div>
        <div class="buttons container">
          <button type="submit" class="popup-buttons">Submit</button>
          <button type="button" class="popup-buttons" onclick="closePopup('popup-form')">Cancel</button>
        </div>
      </div>

    </form>
  </div>

  <div class="form-popup container" id="popup-form-2">

    <form method="post" action="/chg_pswrd">
      <div class="form2 container">
        <h2>Change Password</h2>

        <div class="user-input2 container">
          <label class="input-label2">Current Password</label>
          <input class="input-main-box" name="oldpassword" type="password" value="<%= user.password %>" readonly="readonly">
        </div>

        <div class="user-input2 container">
          <label class="input-label2">New Password</label>
          <input class="input-main-box" name="newpassword" type="text" maxlength=" 15" minlength="8" required>
        </div>

        <div class="user-input2 container">
          <label class="input-label2">Confirm Password</label>
          <input class="input-main-box" name="reppassword" type="text" maxlength=" 15" minlength="8" required>
        </div>

        <div class="buttons container">
          <button type="submit" class="popup-buttons">Submit</button>
          <button type="button" class="popup-buttons" onclick="closePopup('popup-form-2')">Cancel</button>
        </div>
      </div>

    </form>
  </div>

  <div class="form-popup container" id="popup-form-3">

    <form method="post" action="/chg_email">
      <div class="form2 container">
        <h2>Change Email Address</h2>

        <div class="user-input2 container">
          <label class="input-label2">Current Email Address</label>
          <input class="input-main-box" name="oldemail" type="text" value="<%= user.email %>" readonly="readonly">
        </div>

        <div class="user-input2 container">
          <label class="input-label2">New Email Address</label>
          <input class="input-main-box" name="newemail" type="text" minlength=" 3" required>
        </div>

        <div class="buttons container">
          <button type="submit" class="popup-buttons">Submit</button>
          <button type="button" class="popup-buttons" onclick="closePopup('popup-form-3')">Cancel</button>
        </div>
      </div>

    </form>
  </div>

  <div class="form-popup container" id="popup-form-4">

    <form method="post" action="/chg_bio">
      <div class="form2 container">
        <h2>Bio</h2>

        <div class="user-input2 container">
          <textarea id="bio-box" name="newbio" rows="4" cols="30" minlength="3" maxlength="250" required></textarea>
        </div>

        <div class="buttons container">
          <button type="submit" class="popup-buttons">Submit</button>
          <button type="button" class="popup-buttons" onclick="closePopup('popup-form-4')">Cancel</button>
        </div>
      </div>

    </form>
  </div>

  <div id="back">
    <%- include("header") %>
      <h1>My Account &#x2022; <%= user.lastname%>, <%= user.firstname%></h1>

      <div class="grid container">
        <div class="profile-group container">

          <img class="profile-picture" src="/images/blank-profile-picture-973460_960_720.webp">


        </div>

        <div class="form container">
          <div class="user-input container">
            <label class="input-label">Username</label>

            <input class="input-main-box" name="fullname" type="text" value="<%= user.username %>" readonly="readonly">
            <button class="open-button" onclick="openPopup('popup-form')">Edit</button>


          </div>

          <div class="user-input container">
            <label class="input-label">Email address</label>
            <input class="input-main-box" type="text" value="<%= user.email %>" readonly="readonly">
            <button class="open-button" onclick="openPopup('popup-form-3')">Edit</button>

          </div>

          <div class="user-input container">
            <label class="input-label">Password</label>
            <input class="input-main-box" type="password" value="<%= user.password %>" readonly="readonly">
            <button class="open-button" onclick="openPopup('popup-form-2')">Edit</button>

          </div>
        </div>

        <div class="form-2 container">
          <div class="user-input container">
            <label class="input-label">Biography</label>
            <h6>
              <%= user.bio %>
            </h6>
            <button class="open-button" onclick="openPopup('popup-form-4')">Edit Bio</button>
          </div>
        </div>
      </div>

      <script>
        function openPopup(id) {
          var popup = document.getElementById(id).style.display = "block";
          document.getElementById('back').style.opacity = 0.5;
        }
        function closePopup(id) {
          document.getElementById(id).style.display = "none";
          document.getElementById('back').style.opacity = 1;

        }
      </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body>

</html>